<div class="book-form">
    <h2>{{ book.id ? 'Edit Book' : 'Create Book' }}</h2>
    <form (ngSubmit)="onSubmit()" #bookForm="ngForm">
        <div class="form-row">
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" id="title" name="title" [(ngModel)]="book.title" required #title="ngModel">
              <div class="error-message" *ngIf="title.touched">
                {{ getValidationMessage(title, 'Title') }}
                </div>
            </div>

            <div class="form-group">
                <label for="author">Author</label>
                <input type="text" id="author" name="author" [(ngModel)]="book.author" required #author="ngModel">
              <div class="error-message" *ngIf="author.touched">
                {{ getValidationMessage(author, 'Author') }}
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="genre">Genre</label>
                <select id="genre" name="genre" [(ngModel)]="book.genre" required #genre="ngModel">
                    <option value="">Select Genre</option>
                    <option *ngFor="let genre of bookGenres" [value]="genre">{{ genre | enumFormat }}</option>
                </select>
              <div class="error-message" *ngIf="genre.touched">
                {{ getValidationMessage(genre, 'Genre') }}
                </div>
            </div>

            <div class="form-group">
                <label for="type">Type</label>
                <select id="type" name="type" [(ngModel)]="book.type" required #type="ngModel">
                    <option value="">Select Type</option>
                    <option *ngFor="let type of bookTypes" [value]="type">{{ type | enumFormat }}</option>
                </select>
              <div class="error-message" *ngIf="type.touched">
                {{ getValidationMessage(type, 'Type') }}
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="pages">Pages</label>
                <input type="number" id="pages" name="pages" [(ngModel)]="book.pages" required min="1" #pages="ngModel">
              <div class="error-message" *ngIf="pages.touched">
                {{ getValidationMessage(pages, 'Pages') }}
                </div>
            </div>

            <div class="form-group">
                <label for="edition">Edition</label>
                <input type="text" id="edition" name="edition" [(ngModel)]="book.edition" required #edition="ngModel">
              <div class="error-message" *ngIf="edition.touched">
                {{ getValidationMessage(edition, 'Edition') }}
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="creationYear">Creation Year</label>
                <input type="number" id="creationYear" name="creationYear" [(ngModel)]="book.creationYear" required
                       min="1" max="2024" #creationYear="ngModel">
              <div class="error-message" *ngIf="creationYear.touched">
                {{ getValidationMessage(creationYear, 'Creation Year') }}
                </div>
            </div>

            <div class="form-group">
                <label for="releaseDate">Release Date</label>
                <input type="date" id="releaseDate" name="releaseDate" [(ngModel)]="book.releaseDate" required
                       #releaseDate="ngModel">
              <div class="error-message" *ngIf="releaseDate.touched">
                {{ getValidationMessage(releaseDate, 'Release Date') }}
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="status">Status</label>
                <select id="status" name="status" [(ngModel)]="book.status" required #status="ngModel">
                    <option value="">Select Status</option>
                    <option *ngFor="let status of bookStatuses" [value]="status">{{ status | enumFormat }}</option>
                </select>
              <div class="error-message" *ngIf="status.touched">
                {{ getValidationMessage(status, 'Status') }}
                </div>
            </div>

            <div class="form-group">
                <label for="quantity">Quantity</label>
                <input type="number" id="quantity" name="quantity" [(ngModel)]="book.quantity" required min="0"
                       #quantity="ngModel">
              <div class="error-message" *ngIf="quantity.touched">
                {{ getValidationMessage(quantity, 'Quantity') }}
                </div>
            </div>
        </div>

        <div class="button-group">
            <button type="submit" [disabled]="bookForm.invalid">Save</button>
            <button type="button" (click)="goBack()">Cancel</button>
        </div>
    </form>
</div>

<div *ngIf="notification" class="notification" [ngStyle]="{ background: notification.color }">
    {{ notification.message }}
</div>
